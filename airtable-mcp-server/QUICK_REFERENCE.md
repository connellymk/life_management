# Airtable MCP Server - Quick Reference Card

## Schema Discovery Commands

```typescript
// List all available tables
list_all_tables()

// Inspect a table's schema
inspect_table_schema({ table_name: "Tasks" })
inspect_table_schema({ table_name: "Calendar Events", max_records: 10 })
```

## When to Update the MCP Server

| Change in Airtable | Need to Update MCP? | What to Do |
|-------------------|---------------------|------------|
| Add new field to table | ‚úÖ Yes | 1. Inspect schema<br>2. Update create/update functions<br>3. Update tool schemas<br>4. Rebuild |
| Rename field | ‚úÖ Yes | 1. Find all references<br>2. Update field names<br>3. Rebuild |
| Add new table | ‚úÖ Yes | 1. Add TABLES constant<br>2. Add read/CRUD functions<br>3. Rebuild |
| Delete field | ‚ö†Ô∏è Optional | Remove from code or make optional |
| Add/delete records | ‚ùå No | No changes needed |
| Change field values | ‚ùå No | No changes needed |
| Modify views | ‚ùå No | No changes needed |

## 5-Step Update Workflow

```bash
1. Inspect schema: inspect_table_schema({ table_name: "Your Table" })
2. Update code: Edit src/index.ts
3. Rebuild: npm run build
4. Restart: Close and reopen Claude Code
5. Test: Try create/update operations
```

## Field Name Rules

```typescript
// ‚úÖ Correct - Fields with spaces use brackets
fields['Due Date'] = '2026-01-27'
fields['Start Time'] = '2026-01-27T10:00:00.000Z'
fields['Meal Type'] = 'Breakfast'

// ‚úÖ Correct - Simple names can use dot or bracket
fields.Name = 'Task name'
fields['Name'] = 'Task name'

// ‚ùå Wrong - Cannot use dots with spaces
fields.Due Date = '2026-01-27'  // Syntax error!
```

## Common Field Types

| Airtable Type | TypeScript Type | Example Value |
|--------------|----------------|---------------|
| Single line text | string | "Task name" |
| Long text | string | "Long description..." |
| Number | number | 42 |
| Date | string | "2026-01-27" |
| DateTime | string | "2026-01-27T14:00:00.000Z" |
| Single select | string | "In Progress" |
| Multiple select | string[] | ["tag1", "tag2"] |
| Checkbox | boolean | true |
| Link to record | string[] | ["recXXX", "recYYY"] |

## Adding a New Field - Example

**Scenario:** Add "Priority" field to Tasks

**Step 1:** Add in Airtable (Single Select: Low, Medium, High)

**Step 2:** Inspect
```typescript
inspect_table_schema({ table_name: "Tasks" })
```

**Step 3:** Update create function
```typescript
case 'create_task': {
  const fields: any = {
    Name: (args as any).name,
  };

  if ((args as any).category) fields.Category = (args as any).category;
  if ((args as any).priority) fields.Priority = (args as any).priority;  // ADD THIS

  // ... rest of code
}
```

**Step 4:** Update tool schema
```typescript
{
  name: 'create_task',
  inputSchema: {
    properties: {
      name: { type: 'string' },
      category: { type: 'string' },
      priority: {  // ADD THIS
        type: 'string',
        description: 'Priority: Low, Medium, High',
      },
    },
  },
}
```

**Step 5:** Update update function (same pattern)

**Step 6:** Rebuild & restart
```bash
npm run build
# Then restart Claude Code
```

**Step 7:** Test
```typescript
create_task({
  name: "Important task",
  priority: "High"
})
```

## Adding a New Table - Example

**Scenario:** Add "Notes" table

**Step 1:** Create in Airtable with fields

**Step 2:** Add constant
```typescript
const TABLES = {
  // ... existing
  NOTES: 'Notes',  // ADD THIS
};
```

**Step 3:** Inspect
```typescript
inspect_table_schema({ table_name: "Notes" })
```

**Step 4:** Add read function (copy pattern from get_tasks)

**Step 5:** Add CRUD functions (copy patterns from Tasks)

**Step 6:** Rebuild & restart

## Troubleshooting

| Error | Solution |
|-------|----------|
| "Unknown field name" | Run inspect_table_schema, use exact field name |
| "Table not found" | Run list_all_tables, check spelling |
| "TABLES.X is undefined" | Add constant to TABLES object |
| New functions don't appear | Did you rebuild? Did you restart Claude Code? |
| Build fails | Fix TypeScript errors in console output |

## File Structure

```
airtable-mcp-server/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ index.ts          ‚Üê Update this file
‚îú‚îÄ‚îÄ build/
‚îÇ   ‚îî‚îÄ‚îÄ index.js          ‚Üê Generated by npm run build
‚îú‚îÄ‚îÄ MAINTENANCE_GUIDE.md  ‚Üê Full detailed guide
‚îú‚îÄ‚îÄ QUICK_REFERENCE.md    ‚Üê This file
‚îú‚îÄ‚îÄ FIELD_MAPPING.md      ‚Üê Current field reference
‚îî‚îÄ‚îÄ CRUD_OPERATIONS.md    ‚Üê Usage examples
```

## Essential Commands

```bash
# List tables
list_all_tables()

# Inspect schema
inspect_table_schema({ table_name: "Tasks" })

# Rebuild after changes
cd airtable-mcp-server && npm run build

# Then restart Claude Code completely
```

## Code Patterns

### Create Function Pattern
```typescript
case 'create_your_table': {
  const fields: any = {
    Name: (args as any).name,  // Required field
  };

  // Optional fields
  if ((args as any).field1) fields.Field1 = (args as any).field1;
  if ((args as any).field2) fields['Field 2'] = (args as any).field2;

  const createdRecords = await base(TABLES.YOUR_TABLE).create([fields]);
  const createdRecord = createdRecords[0];

  return {
    content: [{
      type: 'text',
      text: `Record created!\nID: ${createdRecord.id}\n${JSON.stringify(createdRecord.fields, null, 2)}`,
    }],
  };
}
```

### Update Function Pattern
```typescript
case 'update_your_table': {
  const recordId = (args as any).record_id;
  const fields: any = {};

  if ((args as any).name) fields.Name = (args as any).name;
  if ((args as any).field1) fields.Field1 = (args as any).field1;

  const updatedRecord = await base(TABLES.YOUR_TABLE).update(recordId, fields);

  return {
    content: [{
      type: 'text',
      text: `Updated!\n${JSON.stringify(updatedRecord.fields, null, 2)}`,
    }],
  };
}
```

### Tool Schema Pattern
```typescript
{
  name: 'create_your_table',
  description: 'Create a new record in Your Table',
  inputSchema: {
    type: 'object',
    properties: {
      name: {
        type: 'string',
        description: 'Record name (required)',
      },
      field1: {
        type: 'string',
        description: 'Optional field',
      },
    },
    required: ['name'],
  },
}
```

## Testing Checklist

After changes:

- [ ] Build succeeds: `npm run build` (no errors)
- [ ] Claude Code restarted completely
- [ ] `list_all_tables()` shows expected tables
- [ ] `inspect_table_schema()` shows correct fields
- [ ] Create operation works with new fields
- [ ] Update operation works with new fields
- [ ] Old operations still work

## Remember

1. **Always inspect first** - `inspect_table_schema()` before coding
2. **Exact names matter** - Case-sensitive, spaces need brackets
3. **Rebuild required** - `npm run build` after every change
4. **Restart required** - Close and reopen Claude Code
5. **Test thoroughly** - Create, update, and read after changes

## Need More Help?

- üìñ Full guide: `MAINTENANCE_GUIDE.md`
- üóÇÔ∏è Current fields: `FIELD_MAPPING.md`
- üí° Usage examples: `CRUD_OPERATIONS.md`
- üîß Inspect schema: `inspect_table_schema({ table_name: "Your Table" })`
